
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="This repo is my homelab, declared in yaml and applied to my Kurbenetes cluster in a declarative gitOps fashion via flux.">
      
      
        <meta name="author" content="Nat Allan">
      
      
        <link rel="canonical" href="https://truxnell.github.io/home-cluster/repository/folder-structure/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.3.8">
    
    
      
        <title>Folder Structure - Truxnell | K8S Home-Cluster</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.1d29e8d0.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../_static/custom.css">
    
    <script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#repository-strucutre" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-component="outdated" hidden>
        <aside class="md-banner md-banner--warning">
          
        </aside>
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Truxnell | K8S Home-Cluster" class="md-header__button md-logo" aria-label="Truxnell | K8S Home-Cluster" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Truxnell | K8S Home-Cluster
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Folder Structure
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/Truxnell/home-cluster" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    Truxnell/home-cluster
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Truxnell | K8S Home-Cluster" class="md-nav__button md-logo" aria-label="Truxnell | K8S Home-Cluster" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Truxnell | K8S Home-Cluster
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Truxnell/home-cluster" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    Truxnell/home-cluster
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Introduction
      </a>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          General
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="General" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          General
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../general/hardware/" class="md-nav__link">
        Hardware
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Repository
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Repository" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Repository
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../semantic-git-messages/" class="md-nav__link">
        Semantic Commits
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Folder Structure
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Folder Structure
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#general-folder-structure" class="md-nav__link">
    General folder structure
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#k8s-folder-structure-cluster-flux-bootstrap" class="md-nav__link">
    K8s folder structure - Cluster &amp; Flux bootstrap
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#k8s-folder-structure-app-manifests" class="md-nav__link">
    K8s folder structure - App Manifests
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Sidero & Talos
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Sidero & Talos" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Sidero & Talos
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sidero/sidero-intro/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sidero/sidero-install/" class="md-nav__link">
        Installation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sidero/retrieve_talosconfig/" class="md-nav__link">
        Retrieve talosconfig
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Diagrams
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Diagrams" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Diagrams
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../diagrams/network-map/" class="md-nav__link">
        Network Map
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../diagrams/cluster-map/" class="md-nav__link">
        Cluster Map
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Cluster
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Cluster" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Cluster
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../cluster/bootstrap-workflow/" class="md-nav__link">
        Bootstrap Workflow
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          Applications
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Applications" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Applications
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../apps/k10/" class="md-nav__link">
        k10
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#general-folder-structure" class="md-nav__link">
    General folder structure
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#k8s-folder-structure-cluster-flux-bootstrap" class="md-nav__link">
    K8s folder structure - Cluster &amp; Flux bootstrap
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#k8s-folder-structure-app-manifests" class="md-nav__link">
    K8s folder structure - App Manifests
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
  <a href="https://github.com/Truxnell/home-cluster/edit/main/docs/src/repository/folder-structure.md" title="Edit this page" class="md-content__button md-icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>



<h1 id="repository-strucutre">Repository strucutre<a class="headerlink" href="#repository-strucutre" title="Permanent link">&para;</a></h1>
<p>Folder structures are important in many projects, and a repostirory for flux (or just <abbr title="Shortening of `Kurbenetes`">k8s</abbr> yaml) is no exception.</p>
<p>Many folder structures exist and this is the second I have used - and likely not the last.
The way my repo is layed out is not my own design - it is blatantly stolen from members of the <a href="https://discord.gg/7PbmHRK"><abbr title="Shortening of `Kurbenetes`">k8s</abbr>@home</a> community.</p>
<div class="admonition info">
<p class="admonition-title">This folder structure inspired by</p>
<ul>
<li><a href="https://github.com/bjw-s/k8s-gitops/">bjw-s repo</a></li>
<li><a href="https://github.com/carpenike/k8s-gitops/">carpenike's repo</a></li>
<li><a href="https://github.com/xunholy/k8s-gitops/">xunholy's repo</a></li>
</ul>
</div>
<h2 id="general-folder-structure">General folder structure<a class="headerlink" href="#general-folder-structure" title="Permanent link">&para;</a></h2>
<p>The <code>k8s</code> folder is blown out and described in the next heading.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>.
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>├── .github/                   # all github related files
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>│   ├── actions                # github actions
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>│   ├── lint                   # linter settings
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>│   ├── mkdocs                 # mkdocs settings
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>│   ├── scripts                # shell scripts
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>│   └── workflows              # github workflows
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>├── .taskfiles/                # taskfiles (https://taskfile.dev)
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>│   └── &lt;taskfile&gt;.yaml        # various taskfiles for faster/easier k8s managment
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>├── .vscode/                   # vscode files
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>│   ├── extensions.json        # recommended repository extensions
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>│   ├── settings.json          # repositroy settings (mainly favorites)
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>│   └── yaml.code-snippets     # yaml snippets i use from time to time
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>├── docs/                      # mkdocs folder (markdown for this site)
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>│   ├── _includes              # markdown includes (abbreviations)
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>│   ├── _static                # static assets (css, js, etc)
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a>│   ├── .draft                 # dump folde for mini-drafts or notes for docs
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a>│   └── src/                   # root of this site
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a>│       ├── &lt;topic_heading&gt;/   # folder named for a topic
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a>│       │   └── &lt;topics&gt;.md    # individual markdown files for this topic
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a>│       ├── index.md           # landing page
<a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a>│       └── CNAME              # CNAME record for this site - required for custom domain on github pages
<a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a>├── k8s/                       # All flux/k8s yaml folder
<a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a>│   └──  (continued below)
<a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a>├── tools/                     # Assorted deployment yaml for a few cluster tools
<a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a>│   └── &lt;tool&gt;.yaml            # tool deployment yaml
<a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a>├── .gitignore                 # file list to be ignored by git
<a id="__codelineno-0-28" name="__codelineno-0-28" href="#__codelineno-0-28"></a>├── .pre-commit-config.yaml    # git precommit settings
<a id="__codelineno-0-29" name="__codelineno-0-29" href="#__codelineno-0-29"></a>├── .sops.yaml                 # sops settings
<a id="__codelineno-0-30" name="__codelineno-0-30" href="#__codelineno-0-30"></a>└── taskfile.yaml              # tasfile setup (points to .taskfile folder)
</code></pre></div>
<h2 id="k8s-folder-structure-cluster-flux-bootstrap">K8s folder structure - Cluster &amp; Flux bootstrap<a class="headerlink" href="#k8s-folder-structure-cluster-flux-bootstrap" title="Permanent link">&para;</a></h2>
<p>This is the 'main' folder for the entire cluster, hence its own section.  The below outlines all the folders that enable the bootstrap of the cluseter, flux installation, loading of repositories and global/cluster variables&amp;secrets.</p>
<p>Manifests (all the apps to run the cluster) will be, again, listed seperatly below.</p>
<div class="admonition question">
<p class="admonition-title">Still confused?</p>
<p>Still confused by this?  The <a href="../../cluster/bootstrap-workflow/">bootstrap page</a> doc may help you visualize how this hangs together.  Perhaps.</p>
</div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="l l-Scalar l-Scalar-Plain">.</span><span class="w"></span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="l l-Scalar l-Scalar-Plain">└── k8s/</span><span class="w">                                            </span><span class="c1"># (1)</span><span class="w"></span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">├── charts/</span><span class="w">                                     </span><span class="c1"># Extra charts</span><span class="w"></span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">│   └── kah-common-chart</span><span class="w">                        </span><span class="c1"># Clone of k8s common chart</span><span class="w"></span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">├── clusters/</span><span class="w">                                   </span><span class="c1"># All cluster-specific yaml</span><span class="w"></span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">│   ├── hegira/</span><span class="w">                                 </span><span class="c1"># Prod cluster yaml</span><span class="w"></span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">│   │   ├── flux/</span><span class="w">                               </span><span class="c1"># Flux yaml</span><span class="w"></span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">│   │   │   ├── deploy/</span><span class="w">                         </span><span class="c1"># Deployment-specific yaml</span><span class="w"></span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">│   │   │   │   ├── cluster-config.yaml</span><span class="w">         </span><span class="c1"># kustomize to apply &#39;../vars&#39; folder</span><span class="w"></span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">│   │   │   │   ├── cluster-orcestration.yaml</span><span class="w">   </span><span class="c1"># kustomize to apply &#39;../orchestration&#39; folder</span><span class="w"></span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">│   │   │   │   ├── cluster-repositories.yaml</span><span class="w">   </span><span class="c1"># kustomize to apply &#39;../repositories&#39; folder</span><span class="w"></span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">│   │   │   │   └── manage-flux.yaml</span><span class="w">            </span><span class="c1"># kustomize to apply flux from its gitrepo</span><span class="w"></span>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">│   │   │   ├── orchestration/</span><span class="w">                  </span><span class="c1"># app orchestration yaml</span><span class="w"></span>
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">│   │   │   │   └── &lt;namespace&gt;.yaml</span><span class="w">            </span><span class="c1"># yaml per namespace, refers to &#39;k8s/manifests/&lt;namespace&gt;/&lt;app&gt;&#39; folders</span><span class="w"></span>
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">│   │   │   ├── repositiores/</span><span class="w">                   </span><span class="c1"># cluster-specific repositories</span><span class="w"></span>
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">│   │   │   │   ├── git</span><span class="w">                         </span><span class="c1"># git repositories (namely this one)</span><span class="w"></span>
<a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">│   │   │   │   └── helm</span><span class="w">                        </span><span class="c1"># cluster-specific helm repos</span><span class="w"></span>
<a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">│   │   │   ├── vars/</span><span class="w">                           </span><span class="c1"># cluster-specific variables</span><span class="w"></span>
<a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">│   │   │       ├── cluster-config.yaml</span><span class="w">         </span><span class="c1"># cluster specific open vars</span><span class="w"></span>
<a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">│   │   │       └── cluster-secrets.sops.yaml</span><span class="w">   </span><span class="c1"># cluster-specific secret vars</span><span class="w"></span>
<a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">│   │   └── deploy-cluster.yaml</span><span class="w">                 </span><span class="c1"># cluster bootstrap to be applied manually.</span><span class="w"></span>
<a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">│   ├── integrations/</span><span class="w">                           </span><span class="c1"># folder for extra manifests</span><span class="w"></span>
<a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">│   │   └── cilium-quick-install/</span><span class="w">               </span><span class="c1"># minimal deployment of cilium to get cluster running</span><span class="w"></span>
<a id="__codelineno-1-24" name="__codelineno-1-24" href="#__codelineno-1-24"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">│   └── sidero/</span><span class="w">                                 </span><span class="c1"># sidero cluster</span><span class="w"></span>
<a id="__codelineno-1-25" name="__codelineno-1-25" href="#__codelineno-1-25"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">│       └── &lt;same folder structure as hegira&gt;</span><span class="w">   </span><span class="c1"># same structure as above</span><span class="w"></span>
<a id="__codelineno-1-26" name="__codelineno-1-26" href="#__codelineno-1-26"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">├── global/</span><span class="w">                                     </span><span class="c1"># global resources for all clusters</span><span class="w"></span>
<a id="__codelineno-1-27" name="__codelineno-1-27" href="#__codelineno-1-27"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">│   ├── repositories/</span><span class="w">                           </span><span class="c1"># global repositories</span><span class="w"></span>
<a id="__codelineno-1-28" name="__codelineno-1-28" href="#__codelineno-1-28"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">│   │   ├── git/</span><span class="w">                                </span><span class="c1"># global git repos</span><span class="w"></span>
<a id="__codelineno-1-29" name="__codelineno-1-29" href="#__codelineno-1-29"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">│   │   └── helm/</span><span class="w">                               </span><span class="c1"># global helms</span><span class="w"></span>
<a id="__codelineno-1-30" name="__codelineno-1-30" href="#__codelineno-1-30"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">│   └── vars/</span><span class="w">                                   </span><span class="c1"># global vars</span><span class="w"></span>
<a id="__codelineno-1-31" name="__codelineno-1-31" href="#__codelineno-1-31"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">│       ├── global-config.yaml</span><span class="w">                  </span><span class="c1"># global open vars</span><span class="w"></span>
<a id="__codelineno-1-32" name="__codelineno-1-32" href="#__codelineno-1-32"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">│       └── global-secrets.sops.yaml</span><span class="w">            </span><span class="c1"># global secrets</span><span class="w"></span>
<a id="__codelineno-1-33" name="__codelineno-1-33" href="#__codelineno-1-33"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">└── manifests/</span><span class="w">                                  </span><span class="c1"># app manifests</span><span class="w"></span>
<a id="__codelineno-1-34" name="__codelineno-1-34" href="#__codelineno-1-34"></a><span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">└── &lt;namespace folders&gt;</span><span class="w">                     </span><span class="c1"># folders per namespace</span><span class="w"></span>
<a id="__codelineno-1-35" name="__codelineno-1-35" href="#__codelineno-1-35"></a><span class="w">            </span><span class="l l-Scalar l-Scalar-Plain">└── &lt;app folder&gt;</span><span class="w">                        </span><span class="c1"># app folder</span><span class="w"></span>
<a id="__codelineno-1-36" name="__codelineno-1-36" href="#__codelineno-1-36"></a><span class="w">                </span><span class="l l-Scalar l-Scalar-Plain">└── &lt;app yaml&gt;</span><span class="w">                      </span><span class="c1"># app yaml</span><span class="w"></span>
</code></pre></div>
<ol>
<li>All <abbr title="Shortening of `Kurbenetes`">k8s</abbr> related yaml</li>
</ol>
<p>We can see here the key differences between clusters will be:</p>
<ul>
<li>Their cluster specific variables</li>
<li>Their orchestration folder, which will call specific portions of the global manifest folder</li>
</ul>
<p>Its possible to also have differing cluster repositories, but with this being a mono-repository that is unlikely</p>
<div class="admonition question">
<p class="admonition-title">Why 'hegira' for the cluster name?</p>
<p>While many use generic names for servers &amp; clusters, aligning to the 'servers are not pets' doctorine that tools like k8's bring, I still need to get my nerd on with a personal cluster.</p>
<p>I got the idea for Hegira from Dan Simmons <a href="https://en.wikipedia.org/wiki/Hyperion_Cantos">Hyperion Cantos</a>.  It ties into the naming of the sidero cluster (technocore) and in general the theme of <abbr title="Artificial Intelligence.">AI</abbr> &amp; Humanity that is portraied in the books</p>
<p>Hegira is also defined as <em>a journey especially when undertaken to escape from a dangerous or undesirable situation</em>, a somewhat medieval Latin translation of an Arabic word that can be translated to 'migration' or 'exodus', which actually somewhat fits the journey my homelab has taken over the years.</p>
</div>
<h2 id="k8s-folder-structure-app-manifests">K8s folder structure - App Manifests<a class="headerlink" href="#k8s-folder-structure-app-manifests" title="Permanent link">&para;</a></h2>
<p>This lists the manifest folder, which contains all the namespace declerations and everything to run the apps for the cluster.</p>
<p>Note this is stored globally, and the two clusters call on specific folders in this manifest to install the apps.  This is just my approach to lean toward a DRY (Dont Repeat Yourself) paradigm.</p>
<p>This enables multiple clusters to re-use the exact same manifests - often using cluster-specific variables to ensure the app is installed in a cluster-specific manner.</p>
<div class="admonition note">
<p class="admonition-title">Not every folder is listed</p>
<p>I havent added every folder in here or apps in folder.  I'm only breaking out important/unique ones for explanation.
Most apps follow the below format, for example the downloads folder/namespace</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="l l-Scalar l-Scalar-Plain">.</span><span class="w"></span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="l l-Scalar l-Scalar-Plain">└── downloads/</span><span class="w">                      </span><span class="c1"># (1)</span><span class="w"></span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">├── qbittorrent/</span><span class="w">                </span><span class="c1"># (2)</span><span class="w"></span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">│   ├── config-pvc.yaml</span><span class="w">         </span><span class="c1"># (3)</span><span class="w"></span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">│   ├── helmrelease.yaml</span><span class="w">       </span><span class="c1"># (4)</span><span class="w"></span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">│   └── kustomization.yaml</span><span class="w">      </span><span class="c1"># (5)</span><span class="w"></span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">├── sabnzbd/</span><span class="w">                    </span><span class="c1"># (8)</span><span class="w"></span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">│   ├── config-pvc.yaml</span><span class="w">         </span><span class="c1"># (9)</span><span class="w"></span>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">│   ├── helmrelease.yaml</span><span class="w">       </span><span class="c1"># (10)</span><span class="w"></span>
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">│   └── kustomization.yaml</span><span class="w">      </span><span class="c1"># (11)</span><span class="w"></span>
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">├── namespace.yaml</span><span class="w">              </span><span class="c1"># (6)</span><span class="w"></span>
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">└── kustomization.yaml</span><span class="w">          </span><span class="c1"># (7)</span><span class="w"></span>
</code></pre></div>
<ol>
<li>Folder for apps, same as namespace name</li>
<li>App folder</li>
<li>App persistent volume claim - usually named <code>app_name-config-v1</code>.  The version control <code>v1</code> allows easy upgrade to pvc's if we want to change sizing.</li>
<li>Helm release for app</li>
<li>Kustomization, calling the config-pvc.yaml and helmrelease.yaml</li>
<li>Namespace resource file</li>
<li>Kustomize for namespace only.  Note this file, unlike other repos, does not call upon the apps - it only refers to and creates the namespace.</li>
<li>App folder</li>
<li>App persistent volume claim - usually named <code>app_name-config-v1</code>.  The version control <code>v1</code> allows easy upgrade to pvc's if we want to change sizing.</li>
<li>Helm release for app</li>
<li>Kustomization, calling the config-pvc.yaml and helmrelease.yaml</li>
</ol>
</div>
<div class="admonition question">
<p class="admonition-title">Why declare <abbr title="k8s resource - Persistent Volume Claim">PVC</abbr>'s independantly</p>
<p>We dont rely on the helm chart to generate a <abbr title="k8s resource - Persistent Volume Claim">PVC</abbr> for us - we prefer to declare them seperately and definitively.
With the normal persistent volume policy of <code>Delete</code> in most persistant storage configs, anytime the <abbr title="k8s resource - Persistent Volume Claim">PVC</abbr> is removed the storage system will delete the <abbr title="k8s resource - Persistent Volume">PV</abbr> - and any data it contains!  So if you make changes to the <abbr title="k8s resource - Persistent Volume Claim">PVC</abbr> or delete the helm release - its possible you will <strong><em><strong>lose</strong></em></strong> your data.  Specifying a <abbr title="k8s resource - Persistent Volume Claim">PVC</abbr> seperatly helps proect agains this.</p>
<p>It also allows us to version control the pvc, which Ii useful if we need to change pvc size later.</p>
</div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>.
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>└── manifests/                      # folder for all namespaces
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>    ├── cert-manager/               # cert-manager folder
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>    │   ├── base/                   # helm-release for
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>    │   ├── certificate/            # cert-manager certificate requests
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>    │   └── config/                 # cert-manager config
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>    │       ├── clusterissuer.yaml  # cert-manaager clusterissuer (letsencrypt config)
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>    │       ├── prometheusrule.yaml # prometheus monitoring rule for certs
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>    │       └── secret.sops.yaml    # cloudflare api-token secret
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>    ├── databases                   # namespace for databases (postgresql, maraidb)
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a>    ├── default/                    # namespace for sidero setup
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a>    │   ├── clusters/               # sidero cluster yaml
<a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a>    │   ├── environments/           # sidero environment yaml
<a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a>    │   ├── serverclasses/          # sidero serverclass yaml
<a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a>    │   └── servers/                # sidero server yaml
<a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a>    ├── downloads                   # downloaders (sabnzbd, qbittorrent, etc)
<a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a>    ├── flux-system/                # flux-system add-ons
<a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a>    │   ├── monitoring/             # prometheus rule &amp; podmonitor for monitoring flux
<a id="__codelineno-3-19" name="__codelineno-3-19" href="#__codelineno-3-19"></a>    │   ├── notifications/          # discord &amp; github notifications
<a id="__codelineno-3-20" name="__codelineno-3-20" href="#__codelineno-3-20"></a>    │   └── webhook/                # github webhook to call flux on github push for instant reconciliation
<a id="__codelineno-3-21" name="__codelineno-3-21" href="#__codelineno-3-21"></a>    ├── games                       # game servers (factorio, foundrytts)
<a id="__codelineno-3-22" name="__codelineno-3-22" href="#__codelineno-3-22"></a>    ├── home-automation             # home automation (hass, nodered, mqtt)
<a id="__codelineno-3-23" name="__codelineno-3-23" href="#__codelineno-3-23"></a>    ├── kasten-io/                  # kasten-io backup solution
<a id="__codelineno-3-24" name="__codelineno-3-24" href="#__codelineno-3-24"></a>    │   └── k10/
<a id="__codelineno-3-25" name="__codelineno-3-25" href="#__codelineno-3-25"></a>    │       ├── blueprints/         # k10 blueprint yaml (extensions of backup method)
<a id="__codelineno-3-26" name="__codelineno-3-26" href="#__codelineno-3-26"></a>    │       ├── monitoring/         # prometheus monitoring rules
<a id="__codelineno-3-27" name="__codelineno-3-27" href="#__codelineno-3-27"></a>    │       ├── policies/           # k10 policies (backup schedules)
<a id="__codelineno-3-28" name="__codelineno-3-28" href="#__codelineno-3-28"></a>    │       └── profiles/           # k10 profiles (backup locations)
<a id="__codelineno-3-29" name="__codelineno-3-29" href="#__codelineno-3-29"></a>    ├── kube-system                 # extra apps for cluster operatorions (CNI, plugins, housekeeping)
<a id="__codelineno-3-30" name="__codelineno-3-30" href="#__codelineno-3-30"></a>        ├── cillium                 # this manifest is applied over the top of the quick-install bootstrap
<a id="__codelineno-3-31" name="__codelineno-3-31" href="#__codelineno-3-31"></a>    ├── media                       # media players/servers (Plex, dizquetv)
<a id="__codelineno-3-32" name="__codelineno-3-32" href="#__codelineno-3-32"></a>    ├── network-system              # network apps/ingress (metallb, traefik, externaldns)
<a id="__codelineno-3-33" name="__codelineno-3-33" href="#__codelineno-3-33"></a>    ├── organizarrs                 # organizer apps (*arr&#39;s)
<a id="__codelineno-3-34" name="__codelineno-3-34" href="#__codelineno-3-34"></a>    ├── rook-ceph/                  # rook-ceph (distributed storage system)
<a id="__codelineno-3-35" name="__codelineno-3-35" href="#__codelineno-3-35"></a>    │   ├── add-ons/                # rook-ceph addons (grafana dashboards)
<a id="__codelineno-3-36" name="__codelineno-3-36" href="#__codelineno-3-36"></a>    │   ├── cluster/                # rook-ceph cluster definition
<a id="__codelineno-3-37" name="__codelineno-3-37" href="#__codelineno-3-37"></a>    │   ├── operator/               # rook-ceph operator
<a id="__codelineno-3-38" name="__codelineno-3-38" href="#__codelineno-3-38"></a>    │   └── snapshot-controller/    # snapshot controller addon (for kasten snapshots)
<a id="__codelineno-3-39" name="__codelineno-3-39" href="#__codelineno-3-39"></a>    ├── security                    # security apps (vaultwarden, SSO)
<a id="__codelineno-3-40" name="__codelineno-3-40" href="#__codelineno-3-40"></a>    ├── services                    # general service apps (hajimari, joplin-server, syncthing)
<a id="__codelineno-3-41" name="__codelineno-3-41" href="#__codelineno-3-41"></a>    ├── sidero-system               # sidero system apps (arm64 patch, loadbalancer)
<a id="__codelineno-3-42" name="__codelineno-3-42" href="#__codelineno-3-42"></a>    ├── system-monitoring           # system monitoring (prometheus, grafana, botkube)
<a id="__codelineno-3-43" name="__codelineno-3-43" href="#__codelineno-3-43"></a>    └── vpn                         # vpn apps (pod gateway, used for qbittorrent/namespace routing)
</code></pre></div>

  <hr>
<div class="md-source-file">
  <small>
    
      Last update:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">July 1, 2022</span>
      
    
  </small>
</div>

              
            </article>
            
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../semantic-git-messages/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Semantic Commits" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Semantic Commits
            </div>
          </div>
        </a>
      
      
        
        <a href="../../sidero/sidero-intro/" class="md-footer__link md-footer__link--next" aria-label="Next: Introduction" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Introduction
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2022 Nat Allan
    </div>
  
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://github.com/Truxnell" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://au.linkedin.com/in/nathannial-allan-60a418104" target="_blank" rel="noopener" title="au.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://voltaicforge.com" target="_blank" rel="noopener" title="voltaicforge.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M208 80c0-26.51 21.5-48 48-48h64c26.5 0 48 21.49 48 48v64c0 26.5-21.5 48-48 48h-8v40h152c30.9 0 56 25.1 56 56v32h8c26.5 0 48 21.5 48 48v64c0 26.5-21.5 48-48 48h-64c-26.5 0-48-21.5-48-48v-64c0-26.5 21.5-48 48-48h8v-32c0-4.4-3.6-8-8-8H312v40h8c26.5 0 48 21.5 48 48v64c0 26.5-21.5 48-48 48h-64c-26.5 0-48-21.5-48-48v-64c0-26.5 21.5-48 48-48h8v-40H112c-4.4 0-8 3.6-8 8v32h8c26.5 0 48 21.5 48 48v64c0 26.5-21.5 48-48 48H48c-26.51 0-48-21.5-48-48v-64c0-26.5 21.49-48 48-48h8v-32c0-30.9 25.07-56 56-56h152v-40h-8c-26.5 0-48-21.5-48-48V80z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["header.autohide", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "navigation.instant", "navigation.sections", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.b97dbffb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.0238f547.min.js"></script>
      
    
  </body>
</html>